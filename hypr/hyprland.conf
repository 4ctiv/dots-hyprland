# This is a modified configuration of Arcolinux
# Modified by 4ctiv
# 
# Please note not all available settings / options are not set here.
# For more managable files this configuration is split into:
# - hyprland.conf: This file, holds the main configuration
# - env.conf	 : This file holds extra environment variables (theme colors etc.) 
# - keybinds.conf: This file holds all keybindings
# 
# info at https://wiki.hyprland.org/
# See https://wiki.hyprland.org/Configuring/Monitors/
#
  ##########################################################################
 ###    Variables, etc.     	 									    ###
##########################################################################
source = ~/.config/hypr/env.conf # Import variables


  ########################################
 ###    Software Requirements (Arch)  ###
#######################################
#
# quick-gui: qemu-desktop
# waybar (taskbar)
# thunar (file manager)
# brave (brower)
# kitty (terminal)
#

  ##########################################################################
 ###    Monitors, Displays, etc. 									    ###
##########################################################################

monitor=,preferred,auto,1

# Output
# Configure your Display resolution, offset, scale and Monitors here, use `hyprctl monitors` to get the info.

# left   monitor
monitor=DP-2,1920x1080@60,0x400,1
workspace=DP-2,1
# middle monitor
monitor=DP-3,1920x1080@60,1920x400,1
workspace=DP-3,2
# right  monitor
monitor=HDMI-A-3,1080x1920@60,3840x0,1,transform,3
workspace=HDMI-A-3,3

workspace=special, allfloat

# Example :
#monitor=eDP-1,1920x1080@60,0x0,1,transform, 0
#monitor=eDP-1,addreserved,10,10,10,10
#workspace=eDP-1,1

  ##########################################################################
 ###    Variables, Definitions, etc. 								    ###
##########################################################################


# See https://wiki.hyprland.org/Configuring/Keywords/ for more
# Setting variables
$mainMod = SUPER
$localBin = $HOME/.local/bin
$scriptsDir = $HOME/.config/hypr/scripts
$hyprDir = $HOME/.config/hypr
$term = kitty
$menu = $scriptsDir/menu
$fullmenu = $scriptsDir/fullmenu
$volume = $scriptsDir/volume
$backlight = $scriptsDir/brightness
$screenshot = $scriptsDir/screenshot
$lock = $scriptsDir/lockscreen
$colorpicker = $scriptsDir/colorpicker
$wofi_beats = $scriptsDir/wofi-beats
$files = thunar
$browser = brave
$editor = code

# Some default env vars
env = XCURSOR_SIZE,24
# env = WLR_DRM_DEVICES,/dev/dri/card1:/dev/dri/card2 # Useage policy: gpu0 > gpu1
exec-once = eval `ssh-agent -s`
env = SSH_AUTH_SOCK, $SSH_AUTH_SOCK

  ##########################################################################
 ###    One time run, Startup rules, etc. 							    ###
##########################################################################

# Fix shared steam library on exfat drive (exfat symlink problems)
# exec-once = sudo mount --bind ~/.local/share/Steam/steamapps/compatdata /media/Game_Drive/SteamLibrary/steamapps/compatdata
# exec-once = sudo mount --bind ~/.local/share/Steam/steamapps/shadercache /media/Game_Drive/SteamLibrary/steamapps/shadercache

# Startup
exec-once = gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"
exec-once = $scriptsDir/startup
exec-once = swaybg -m fill -i $HOME/.config/hypr/bg/wallpaper.png
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = $scriptsDir/portal
exec-once = XDG_CURRENT_DESKTOP=wayland flameshot

# Animated wallpaper using mpv and mpvpaper
exec-once = mpvpaper '*' /media/Video_Data/Library_Video/Video\ Wallpaper/Shuttle_2k.mp4 -f -s -o "mute=yes --panscan=1.0 --loop-playlist shuffle"

# with lock - hyprctl (600[s] = 20[min])
exec-once = swayidle -w timeout 600 '$lock' timeout 600 'hyprctl dispatch dpms off' resume 'hyprctl dispatch dpms on' before-sleep '$lock'

# with lock - swaylock
# exec-once = swayidle -w timeout 600 'swaylock -f -c 111111' timeout 600 '' resume '' before-sleep 'swaylock -f -c 111111'

# without lock
# exec-once = swayidle -w  timeout 600 'hyprctl dispatch dpms off' resume 'hyprctl dispatch dpms on'

# For all categories, see https://wiki.hyprland.org/Configuring/Variables/
input {
  # qwerty
  kb_layout = de
  kb_variant = 
  kb_model = 
  kb_options =
  kb_rules = 

  follow_mouse = true
  numlock_by_default = true

  touchpad {
    natural_scroll = true
    tap-to-click = true
    drag_lock = true
    disable_while_typing = true
  }

  sensitivity = -0.7 -0.7 # -1.0 - 1.0, 0 means no modification
  force_no_accel=true     # Disable cursor acceleration
}

misc {
  disable_hyprland_logo = true
  disable_splash_rendering = true
  mouse_move_enables_dpms = true
  no_direct_scanout = true #for fullscreen games
}

binds {
  workspace_back_and_forth = true
}

  ##########################################################################
 ###    Theming, Optics, etc. 	 									    ###
##########################################################################

general {
  # See https://wiki.hyprland.org/Configuring/Variables/ for more

  # Default
  #gaps_in = 2
  #gaps_out = 6
  #border_size = 2
  gaps_in = 2
  gaps_out = 2
  border_size = 2

  #one color
  #col.active_border = rgba(7aa2f7aa)

  #two colors - gradient

  # Default settings
  # col.active_border = rgba(7aa2f7aa) rgba(c4a7e7aa) 45deg
  # col.inactive_border = rgba(414868aa)

  # Animated window border
  col.active_border = rgb(8aadf4) rgb(24273A) rgb(24273A) rgb(8aadf4) 45deg
  col.inactive_border= rgb(24273A) rgb(24273A) rgb(24273A) rgb(24273A) 45deg
  bezier = linear, 0.0, 0.0, 1.0, 1.0
  animation = borderangle, 1, 100, linear, loop

  #layout = master
  layout = dwindle
}

decoration {
  # See https://wiki.hyprland.org/Configuring/Variables/ for more

  # Default
  # rounding = 6
  rounding = 2
  
  blur {
	enabled = true
    size = 3
	passes = 3
	# ignore_opacity = false
	new_optimizations = true
	# xray = false
	# noise = 0.0117
	# contrast = 0.8916
	# brightness = 0.8172
  }
  
  active_opacity = 1.0
  inactive_opacity = 0.9
  fullscreen_opacity = 1.0

  drop_shadow = true
  shadow_range = 4
  shadow_render_power = 3
  col.shadow = rgba(1a1a1aee)

  # dim_inactive = true
  # dim_strength = 0.8
}

blurls = waybar

animations {
  enabled = true

  # Some default animations, see https://wiki.hyprland.org/Configuring/Animations/ for more

  bezier = myBezier, 0.05, 0.9, 0.1, 1.05

  animation = windows, 1, 7, myBezier
  animation = windowsOut, 1, 7, default, popin 80%
  animation = border, 1, 10, default
  animation = fade, 1, 7, default
  animation = workspaces, 1, 6, default
  # animation = specialWorkspaces, 1, 3, default, slidevert
}

dwindle {
  # See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
  pseudotile = true
  preserve_split = true
}

master {
  # See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
  new_is_master = true
  mfact = 0.5
}

gestures {
  # See https://wiki.hyprland.org/Configuring/Variables/ for more
  workspace_swipe = false
  workspace_swipe_fingers = 3
}

# Example per-device config
# See https://wiki.hyprland.org/Configuring/Keywords/#executing for more
#device:epic mouse V1 {
#  sensitivity = -0.5
#}

  ##########################################################################
 ###    Application specific rules (window rules) 		  				###
##########################################################################


# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# Example windowrule v1
# windowrule = float, yad|nm-connection-editor|pavucontrol
# windowrule = float, feh|Gimp|qt5ct

# Example windowrule v2
# windowrulev2 = tile, class:^(Spotify)$

# windowrulev2 = workspace 4, class:^(Apache Directory Studio)$
# windowrulev2 = bordercolor rgb(EE4B55) rgb(880808), fullscreen:1
# windowrulev2 = opacity 0.8 0.8, pinned:1
# windowrulev2 = workspace 10, class:^(Microsoft-edge)$
# windowrulev2 = workspace 8 silent, class^(Steam)$, title:^(Steam)$
# windowrulev2 = float,class:^(firefox)$,title:^(Picture-in-Picture)$

# Special app configs
# windowrulev2 = floating,class:(quickgui)
windowrulev2 = center,class:(quickgui)

# for floating windows
windowrulev2 = bordersize 3, floating:1
windowrulev2 = opacity 0.8 0.7, floating:1
# windowrulev2 = center, floating:1 # Also affects floating menues of left click

# for special border coloring
# windowrulev2 = bordercolor rgba(008080aa) rgb(414868) rgb(414868) rgba(008080aa) 45deg , floating:1			# teal, animated with 'col.active_border' for 'bordercolor'
windowrulev2 = bordercolor rgba(b8860baa) rgb(414868) rgb(414868) rgba(b8860baa) 45deg , pinned:1			# gold (dark)
# windowrulev2 = bordercolor rgba(f7cf7aaa) rgb(414868) rgb(414868) rgba(f7cf7aaa) 45deg , xwayland:1			# yellow
windowrulev2 = bordercolor rgba(db7093aa) rgb(414868) rgb(414868) rgba(db7093aa) 45deg , fakefullscreen:1	# red-violet
windowrulev2 = bordercolor rgba(7aa2f7aa) rgb(414868) rgb(414868) rgba(7aa2f7aa) 45deg , workspace:special	# blue

# for special window centering
# Todo: Rule for all windows except menuse (e.g. right click menu)
windowrulev2 = center,class:(blueberry)
windowrulev2 = center,class:(wofi)
windowrulev2 = center,class:(lutris)
windowrulev2 = center,class:(rnote)
windowrulev2 = center,class:(xournalpp)
windowrulev2 = center,class:(easyeffects)
windowrulev2 = center,class:^(pamac)$

# for waybar yay update click
windowrulev2 = animation popin, class:^(update)$, title:^(update)$
windowrulev2 = float, class:^(update)$, title:^(update)$
windowrulev2 = size 60% 50%, class:^(update)$, title:^(update)$
windowrulev2 = center, class:^(update)$, title:^(update)$

# for ttyclock
windowrulev2 = float, class:^(clock)$, title:^(clock)$
windowrulev2 = size 33% 27%, class:^(clock)$, title:^(clock)$
windowrulev2 = center, class:^(clock)$, title:^(clock)$

  ##########################################################################
 ###    Keybindings, etc.                                               ###
##########################################################################
source = ~/.config/hypr/keybinds.conf